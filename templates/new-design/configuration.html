<script>
function restart() {
	var request  = new XMLHttpRequest();
	request.open("GET", "restart");
	request.send("");
}
function sendData() {
	var form = document.form;
	var request  = new XMLHttpRequest();
	if (form.ssid.value == "" || form.identifier.value == "" || form.update == "") {
		return;
	}
	var params = encodeURI(form.ssid.name + "=" + form.ssid.value + "&" +
			form.password.name + "=" + form.password.value + "&" +
			form.identifier.name + "=" + form.identifier.value + "&" +
			form.sleepInterval.name + "=" + form.sleepInterval.value + "&" +
			form.otaUrl.name + "=" + form.otaUrl.value + "&" +
			form.otaUpdateInterval.name + "=" + form.otaUpdateInterval.value
	);
	request.open("GET", "set_config" + "?" + params);
	request.send("");
}
function showPassword() {
    var field = document.getElementById("password");
    var button = document.getElementById("pwd");
    if (field.type == "password") {
        field.type = "text";
        button.value = "***";
    }
    else {
        field.type = "password";
        button.value = "abc";
    }
    ;
}
</script>
<style>
#form-div {
	background-color:rgba(72,72,72,0.4);
	padding-left:35px;
	padding-right:35px;
	padding-top:35px;
	padding-bottom:50px;
	width: 450px;
	float: left;
	left: 50%;
	position: absolute;
  margin-top:30px;
	margin-left: -260px;
}
.data-input {
	color:#3c3c3c;
	background-color: #fbfbfb;
	padding: 13px 13px 13px 24px;
	font-size:24px;
	width:100%;
	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	-ms-box-sizing: border-box;
	box-sizing: border-box;
  border: 3px solid rgba(0,0,0,0);
}
#button-blue, #pwd{
	float:left;
	width: 100%;
	border: #fbfbfb solid 4px;
	cursor:pointer;
	background-color: #3498db;
	color:white;
	font-size:24px;
	padding-top:16px;
	padding-bottom:16px;
  margin-top:-4px;
  font-weight:700;
}

#button-blue:hover, #pwd:hover{
	background-color: rgba(0,0,0,0);
	color: #0493bd;
}
	

</style>
	<iframe name="hidden_frame" style="display:none"></iframe>
	  <div id="form-div">
<form name="form" action="/set_config" method="get" target="hidden_frame">
	
		<p><input type="text" name="ssid" class="data-input" placeHolder="SSID" required min="1" max="32" value="{{ssid}}"/></p>
		<p>
		<div class="submit">
		    <input type="password" id="password" name="password" class="data-input" placeHolder="Password" min="0" max="32" value="{{password}}" style="width:75%"/>
			<input type="button" class="pwd-button" id="pwd" onClick="showPassword();" title="Show/hide password" value="abc" style="width:20%;float:right"/>
		</div>
		</p>
		<p><input type="text" name="identifier" class="data-input"  placeHolder="Identifier" required min="1" max="32" value="{{identifier}}"/></p>
		<p><input type="number" name="sleepInterval" class="data-input" placeHolder="Sleep Interval" required min="1" max="9999" value="{{sleepInterval}}"/></p>
		<p><input type="text" name="ThingspeakKey" class="data-input" placeHolder="Thingspeak API Key" min="0" max="32" value="{{thingspeakApiKey}}"/></p>
		<p><input type="text" name="otaUrl" class="data-input" placeHolder="OTA URL" min="0" max="32" value="{{otaUrl}}"/></p>
		<p><input type="number" name="otaUpdateInterval" class="data-input" placeHolder="OTA Interval" min="0" max="9999" value="{{otaUpdateInterval}}"/></p>
		<div class="submit">
  		<input type="button" value="Update" onClick="sendData();" id="button-blue">
		<input type="button" value="Restart ESP8266" onClick="restart();" id="button-blue">
		</div>
	
</form></div>
